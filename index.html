<!doctype html>
<html lang="uk" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WPlace — конвертер у палітру (HTML/CSS/JS)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <h1>WPlace — конвертер у палітру</h1>
      <div class="topbar__right">
        <label class="theme-toggle">
          <input id="themeToggle" type="checkbox" />
          <span class="slider"></span>
          <span class="label">Темна тема</span>
        </label>
        <div class="muted small">Дизеринг: Floyd–Steinberg / Atkinson / Ordered</div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <h2>1) Завантажте зображення</h2>
        <div id="drop" class="drop">
          <p>Перетягніть файл сюди або натисніть, щоб обрати</p>
          <input id="file" type="file" accept="image/*" hidden />
          <div class="hint">Також можна вставити URL:</div>
          <input id="url" type="text" placeholder="https://..." />
        </div>
        <div class="mt-16">
          <div class="label">Попередній перегляд джерела</div>
          <div class="checker">
            <canvas id="src" class="preview"></canvas>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Результат</h2>
        <div class="checker">
          <canvas id="out" class="preview"></canvas>
        </div>
        <p class="hint mt-8">Попередній перегляд збільшено без згладжування. PNG зберігається у натуральному розмірі (без альфи).</p>
      </section>
    </div>

    <div class="grid mt-24">
      <section class="card">
        <h2>2) Налаштування</h2>
        <div class="form">
          <label>Колірна метрика
            <select id="metric">
              <option>Lab</option>
              <option>RGB</option>
            </select>
          </label>

          <label>Дизеринг
            <select id="dither">
              <option>Floyd–Steinberg</option>
              <option>Atkinson</option>
              <option>Ordered (8x8)</option>
              <option>None</option>
            </select>
          </label>

          <div id="orderedWrap" class="hidden">
            <label>Сила ordered-дизерингу: <span id="orderedVal">0.75</span>
              <!-- розширений діапазон до 3.0 -->
              <input id="ordered" type="range" min="0" max="3" step="0.01" value="0.75" />
            </label>
          </div>

          <label>Ширина результату: <span id="wVal">128</span> px
            <input id="outW" type="range" min="16" max="1024" value="128" />
          </label>

          <label>Масштаб попереднього перегляду (піксель-арт): x<span id="scaleVal">4</span>
            <input id="scale" type="range" min="1" max="32" value="4" />
          </label>
        </div>

        <div class="actions">
          <button id="convert" class="btn">Конвертувати</button>
          <button id="save" class="btn secondary">Завантажити PNG</button>
        </div>
      </section>

      <section class="card">
        <h2>3) Палітра WPlace (<span id="pcount"></span> кольорів)</h2>
        <div id="palette" class="palette"></div>
      </section>
    </div>

    <section class="card mt-24">
      <h2>Підказки</h2>
      <ul class="tips">
        <li>Метрика <b>Lab</b> зазвичай дає природніші відповідності кольорів, ніж простий RGB.</li>
        <li><b>Floyd–Steinberg</b> — класика для градієнтів; <b>Atkinson</b> — зернистіший ретро-вигляд; <b>Ordered</b> — регулярний візерунок для великих заливок.</li>
        <li>Зменшуйте ширину, якщо потрібно вкластися у ліміт пікселів батлу.</li>
        <li>Підтримуються Drag&Drop, завантаження за URL та збереження PNG без прозорості.</li>
      </ul>
    </section>
  </main>

  <footer class="container footer">Зроблено для піксель-батлу WPlace.</footer>

  <script src="app.js"></script>
</body>
</html>
